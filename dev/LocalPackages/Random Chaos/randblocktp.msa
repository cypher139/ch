#version 1.1-tmc
admin:/randblock [$id='GRASS_BLOCK'] [$tries='20'] = >>>
	if(is_numeric($id)) {
		assign(@id, data_name($id))
		assign(@idn, $id)
	} else {
		assign(@id, to_upper($id))
		assign(@idn, data_values(@id))
	}
	assign(@xyz, associative_array())
#world
	if(player() == '~console') {
		assign(@xyz[world], 'world')
	} else {
		assign(@xyz[world], 'world')
	}
	
	assign(@tries, $tries)
	msg(color(7).'Searching for a '.color(3).@id.color(7).' [ID: '.color(3).@idn.color(7).'] block on the top level of geography for '.@tries.' tries.')
	
	for(assign(@i, 1), @i <= @tries, @i++,
#x (0)
		assign(@xyz[x], rand(-5500, 5500))
#z (2)
		assign(@xyz[z], rand(-5500, 5500))
#y (1)
		assign(@xyz[y], get_highest_block_at(@xyz[x], @xyz[z], @xyz[world])[1] --)

		assign(@blockID, get_block(@xyz))
		msg(color(9).'Try #: '.@i.color(7).' Location (xyz): '.@xyz[x].','.@xyz[y].','.@xyz[z].','.@xyz[world].color(3).' id: '.@blockID)
		if(@blockID == @id) {
			msg(color(7).'Yay! A random "'.color(3).@blockID.color(7).'" block is located here: '.@xyz[x].','.@xyz[y].','.@xyz[z].','.@xyz[world])
			if(player() != '~console') {
				set_ploc(@xyz)
				msg(color(7).'Teleported you to the location!')
			}
			break()
# wrong spot, needs for return			msg(color(7).'Aw, after '.@tries.' tries a "'.color(3).@blockID.color(7).'" block was not found.')
		}
	)
<<<