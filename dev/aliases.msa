######################################################
#
#   Welcome to CommandHelper scripts for this server.
#
######################################################


###----Aliases----###

#
#worldedit
/1 = '//pos1'
/2 = '//pos2'
/s1 = '//hpos1'
/s2 = '//hpos2'
//a = /ascend
//d = /descend
/fw [$data=5] = /fixwater $data
/fl [$data=5] = /fixlava $data
/s $ = /searchitem $
/nograss = /br sphere 0 15 \ /mask 31,37,38
#
#for users of essentials
/top = /ascend
/clearinventory = /clear -a
/sm [$data=pig] [$qty=3] = /spawnmob $data $qty
#
#time
/ws = /weather sunny
/wr = /weather rain
/td = /time day
/ts = /time sunrise
/tn = /time night
#
#LazyRoad
/rs3g = /road Simple3
/rs5g = /road Simple5
/rgt = /road GlassTunnel
/rs2 = /road Simple2torches
/rs3 = /road Simple3torches
/rs5 = /road Simple5torches
/rs = /road stop
/ru = /road undo
/bsr5g = /bridge Simple5 Round3
/bsr3g = /bridge Simple3 Round3
/bsr5 = /bridge Simple5torches Round3
/bsr3 = /bridge Simple3torches Round3
/tg = /tunnel GlassTunnel
#
#misc
/food = /kit foodnow
/foodi = /give player() pork 3
/lw = /listwarps
#/adopt $data = /spawnmob wolf:tame $data player()
/give $0 $1 $2 $3 = /give $0 $1.':'.$3 $2
#
#uhoh need a short command to help me now!
/b [$data] = /butcher $data
/g = /god
/h [$player] = /heal $player
/f [$data] = /butcher \ /heal \ /time day
#
#Kits
/weapon = /kit weapon
/red = /kit redstone
/redi = /kit redstoneitems

###----Scripts----###



#
##-------Scripts: Oops preventers-------##
#
#everyone:/reload = >>>
#if(equals(player(), ~console), 
#	assign(@msg, color(c).'The console is an idiot and tried to reload the server!'),
#	assign(@msg, concat(pinfo(player(),4), color(c),' is an idiot and tried to reload the server!'))
#	)
#_bc(Oops, @msg)
#<<<



#
##-------Scripts: Replacing plugins-------##
#

#commandbook: quick kit replacement
everyone:/powerup = >>>
#array: meta, qty, name
assign(@player, player())
#278
pgive_item(@player, array(name: 'DIAMOND_PICKAXE', qty: '1'))
#50
pgive_item(@player, array(name: 'WALL_TORCH', qty: '64'))
#314
set_pinv(@player, array(103: array(type: 'GOLDEN_HELMET', qty: 1)))
#317
set_pinv(@player, array(100: array(type: 'GOLDEN_BOOTS', qty: 1)))
msg(color(e).'Kit \'powerup\' given!')
<<<



#bukkit plugin replacements


#
##-------Custom scripts:-------##
#


#Worlds:
#Information and teleporting
world:/world [$world] = >>>
assign(@world, $world)
if(@world == '',
    assign(@pworld, pworld())
    assign(@gworld, get_worlds())
    assign(@world, concat(color(9),'You are in world: ', color(a), @pworld))
    assign(@aworld, concat(color(7),'Available worlds: ', color(7), @gworld))
    msg(@world)
    die(@aworld)
)

if(@world == 'c',
    run(/mvtp creative)
    die()
)

if(@world == 'sky',
    run(/mvtp skyblock)
    die()
)

if(@world == 'f',
    run(/mvtp fun)
    die()
)


if(@world == 'end',
    run(/mvtp creative_the_end)
    die()
)


run(/mvtp @world)
<<<


#-------------------------------------
#[Spleef]

#
#spleef floor reset script
everyone:/sareset [$blockid=80] = >>>
    assign(@cooldown, 100)
    assign(@player, player())

    if(is_null(get_value(@player.'.spleef1_lastreset')),
        store_value(@player.'.spleef1_lastreset',0)
    )
  
    assign(@lastreset, get_value(@player.'.spleef1_lastreset'))

    if(gt(add(@lastreset, @cooldown), divide(time(),1000)),
        # then
        msg(concat(color(red),'[', color(6), Spleef, color(red), ']', color(gold) 'Not enough time passed since your last arena reset.'))
	assign(@timeleftsec, subtract(add(@lastreset, @cooldown), divide(time(),1000)))
	assign(@timeleftmin, divide(@timeleftsec, 60))
	assign(@timeleft, round(@timeleftsec))
        die(concat(color(red),'[', color(6), Spleef, color(red), '] ', color(7), @timeleft, color(red),' seconds to go'))
    )

    store_value(@player.'.spleef1_lastreset', divide(time(),1000))

    runas(~op, /region select arenafloor)
    runas(~op, '//set' $blockid)   # 80 is 'snow block'

    assign(@pinfo, pinfo())
    _bc(Spleef, concat(array_get(@pinfo,4), ' reset the spleef arena!'))
<<<



#-------------------------------------
#Other scripts


admin:/adventure = >>>
assign(@sp, get_value(@player.'.adventure.savepoint'))
if(@sp == null || @sp == '', die())
	set_ploc(@player, @sp)
msg('Returning to where you left off in Adventure!')
<<<

citizen:/ow = >>>
call_alias(/b)
call_alias(/td)
call_alias(/h)
<<<

admin:/randcolor [$msg='This is a test message.'] = >>>
assign(@array, array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, a, b, c, d, e, f, k, l, m, n, o, r))
assign(@color, array_rand(@array, 1, false))
assign(@color, array_implode(@color))
msg(color(@color).$msg)
<<<

everyone:/randomnumber [$minnumber=1] [$maxnumber=100] = >>>
assign(@rand, rand($minnumber, $maxnumber))
msg(@rand)
<<<

everyone:/superjump [$minnumber=1] [$maxnumber=100] = >>>
assign(@player, player())
assign(@rand, rand($minnumber, $maxnumber))
assign(@sjenabled, import('superjump.enabled.'.@player))
if(@sjenabled == false || @sjenabled == '' || @sjenabled == null,
	export('superjump.enabled.'.@player, true)
	msg(color(a).'You can now jump '.color(e).@rand.color(a).' times your normal jump height!')
,
	export('superjump.enabled.'.@player, false)
	msg(color(e).'Your jumps are now normal again.')
)
<<<
